{
  "realm": "ElexisEnvironment",
  "displayName": "Elexis-Environment $(date:yyyy-MM-dd HH:mm)",
  "enabled": true,
  "internationalizationEnabled": true,
  "sslRequired": "none",
  "registrationAllowed": false,
  "registrationEmailAsUsername": false,
  "loginWithEmailAllowed": false,
  "duplicateEmailsAllowed": true,
  "verifyEmail": true,
  "editUsernameAllowed": false,
  "loginTheme": "elexis-environment",
  "accountTheme": "elexis-environment",
  "adminTheme": "keycloak",
  "emailTheme": "elexis-environment",
  "defaultLocale": "de",
  "userManagedAccessAllowed": true,
  "supportedLocales": [
    "de",
    "en"
  ],
  "localizationTexts": {
    "de": {
      "profile.attributes.associated-contact-id": "Zugeordneter Kontakt",
      "profile.attributes.aobo-mandator-ids": "Tätig für Mandanten"
    },
    "en": {
      "profile.attributes.associated-contact-id": "Associated contact",
      "profile.attributes.aobo-mandator-ids": "Acting on behalf of mandators"
    }
  },
  "ssoSessionIdleTimeout": 7200,
  "ssoSessionMaxLifespan": 86400,
  "authenticationFlows": [],
  "roles": {
    "realm": [
      {
        "name": "bot",
        "description": "Bot Benutzer, keine reale Person, kann sich nicht in Elexis RCP anmelden"
      },
      {
        "name": "guacamole",
        "description": "Benutzer des Guacamole Remote Desktop Client"
      },
      {
        "name": "guacamole-admin",
        "description": "Administrator des Guacamole Remote Desktop Client"
      },
      {
        "name": "ict-administrator",
        "description": "Admin-Rechte ohne Zugriff/ Einsicht auf medizinische Daten",
        "composite": true,
        "composites": {
          "client": {
            "realm-management": [
              "manage-users",
              "view-users",
              "query-users"
            ],
            "elexis-server.jaxrs-api": [
              "user"
            ],
            "myelexis-server": [
              "fhir-r4-access",
              "fhir-r5-access",
              "api-access"
            ]
          }
        }
      },
      {
        "name": "mpk",
        "description": "Personal mit der Tätigkeit einer Medizinische Praxis Koordinatorin"
      },
      {
        "name": "medical-assistant",
        "description": "Medizinische Assistenz oder Fachkraft in Ausbildung"
      },
      {
        "name": "medical-practitioner",
        "description": "Höhere medizinische Fachkraft"
      },
      {
        "name": "mpa",
        "description": "Personal mit der Tätigkeit einer Medizinische Praxis Assistentin"
      },
      {
        "name": "medical-user",
        "description": "Medizinisches Personal mit Zugriff auf medizinische Daten",
        "clientRole": false,
        "composite": true,
        "composites": {
          "client": {
            "myelexis-server": [
              "fhir-r4-access"
            ],
            "elexis-server.fhir-api": [
              "user"
            ]
          }
        }
      },
      {
        "name": "mandator",
        "description": "Rechnungssteller"
      },
      {
        "name": "user",
        "description": "Login-Recht ohne Medizinische Daten "
      }
    ],
    "client": {}
  },
  "passwordPolicy": "notEmail(undefined) and notUsername(undefined) and passwordHistory(3) and length(8)",
  "users": [
    {
      "id": "d6f139fb-f507-4cc4-aa35-b86f05aa0925",
      "username": "service-account-checkin-app",
      "emailVerified": false,
      "attributes": {
        "associated-contact-id": [
          "mngd1CheckinApp100000000"
        ]
      },
      "enabled": true,
      "totp": false,
      "serviceAccountClientId": "checkin-app",
      "disableableCredentialTypes": [],
      "requiredActions": [],
      "realmRoles": [
        "bot"
      ],
      "clientRoles": {
        "elexis-server.fhir-api": [
          "user"
        ],
        "myelexis-server": [
          "fhir-r4-access"
        ]
      },
      "notBefore": 0,
      "groups": []
    },
    {
      "id": "68f195df-17ad-444f-b8b2-a06c2b59610d",
      "username": "service-account-myelexis-server",
      "emailVerified": false,
      "enabled": true,
      "totp": false,
      "serviceAccountClientId": "myelexis-server",
      "disableableCredentialTypes": [],
      "requiredActions": [],
      "realmRoles": [
        "default-roles-elexisenvironment"
      ],
      "clientRoles": {
        "realm-management": [
          "view-users",
          "query-users"
        ]
      },
      "notBefore": 0,
      "groups": []
    }
  ],
  "clientScopeMappings": {
    "elexis-server.fhir-api": [
      {
        "client": "checkin-app",
        "roles": [
          "user"
        ]
      }
    ],
    "realm-management": [
      {
        "client": "myelexis-server",
        "roles": [
          "view-users",
          "query-users"
        ]
      }
    ],
    "myelexis-server": [
      {
        "client": "checkin-app",
        "roles": [
          "fhir-r4-access"
        ]
      }
    ]
  },
  "scopeMappings": [
    {
      "client": "checkin-app",
      "roles": [
        "bot"
      ]
    },
    {
      "client": "elexis-server.jaxrs-api",
      "roles": [
        "ict-administrator",
        "user",
        "bot"
      ]
    },
    {
      "client": "elexis-web-api",
      "roles": [
        "mandator",
        "medical-assistant",
        "bot",
        "ict-administrator",
        "mpk",
        "medical-practitioner",
        "medical-user",
        "user",
        "poweruser",
        "mpa"
      ]
    },
    {
      "clientScope": "nextcloud",
      "roles": [
        "mandator",
        "medical-assistant",
        "mpk",
        "medical-practitioner",
        "medical-user",
        "user",
        "mpa"
      ]
    }
  ],
  "defaultOptionalClientScopes": [
    "microprofile-jwt",
    "address",
    "offline_access",
    "phone"
  ],
  "clients": [],
  "components": {
    "org.keycloak.userprofile.UserProfileProvider": [
      {
        "id": "8811f94a-1aee-45e3-b05d-ec4e4824770b",
        "providerId": "declarative-user-profile",
        "subComponents": {},
        "config": {
          "kc.user.profile.config": [
            "{\"attributes\":[{\"name\":\"username\",\"displayName\":\"${username}\",\"validations\":{\"length\":{\"min\":3,\"max\":255},\"username-prohibited-characters\":{},\"up-username-not-idn-homograph\":{}},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"email\",\"displayName\":\"${email}\",\"validations\":{\"email\":{},\"length\":{\"max\":255}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"firstName\",\"displayName\":\"${firstName}\",\"validations\":{\"length\":{\"max\":255},\"person-name-prohibited-characters\":{}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"lastName\",\"displayName\":\"${lastName}\",\"validations\":{\"length\":{\"max\":255},\"person-name-prohibited-characters\":{}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"associated-contact-id\",\"displayName\":\"${profile.attributes.associated-contact-id}\",\"validations\":{},\"annotations\":{},\"permissions\":{\"view\":[\"user\"],\"edit\":[\"admin\"]},\"group\":\"user-metadata\",\"multivalued\":false},{\"name\":\"aobo-mandator-ids\",\"displayName\":\"${profile.attributes.aobo-mandator-ids}\",\"validations\":{},\"annotations\":{},\"permissions\":{\"view\":[\"user\"],\"edit\":[\"admin\"]},\"group\":\"user-metadata\",\"multivalued\":true}],\"groups\":[{\"name\":\"user-metadata\",\"displayHeader\":\"User metadata\",\"displayDescription\":\"Attributes, which refer to user metadata\"}],\"unmanagedAttributePolicy\":\"ENABLED\"}"
          ]
        }
      }
    ]
  },
  "identityProviders": [],
  "identityProviderMappers": [],
  "groups": [
    {
      "name": "GroupArzt",
      "path": "/GroupArzt"
    },
    {
      "name": "GroupAssistent",
      "path": "/GroupAssistent"
    },
    {
      "name": "GroupMPA",
      "path": "/GroupMPA"
    },
    {
      "name": "GroupMPK",
      "path": "/GroupMPK"
    },
    {
      "name": "GroupPraktikant",
      "path": "/GroupPraktikant"
    },
    {
      "name": "GroupIntern",
      "path": "/GroupIntern"
    },
    {
      "name": "GroupThirdParty",
      "path": "/GroupThirdParty"
    }
  ],
  "requiredActions": [],
  "authenticatorConfig": [
    {
      "id": "ee-conditional-otp-ingress",
      "alias": "EE-Conditional-Otp-Ingress",
      "config": {
        "defaultOtpOutcome": "force",
        "noOtpRequiredForHeaderPattern": "X-EE-Ingress-Port: 443"
      }
    },
    {
      "alias": "Password-And-Conditional-Otp-Ingress",
      "config": {
        "defaultOtpOutcome": "force",
        "noOtpRequiredForHeaderPattern": "X-EE-Ingress-Port: 443"
      }
    },
    {
      "alias": "is-external-connection",
      "config": {
        "negate_outcome": "true",
        "search_pattern": "X-EE-Ingress-Port: 443"
      }
    },
    {
      "alias": "deny-external-user-access-without-second-factor",
      "config": {
        "require-otp": "true",
        "denyErrorMessage": "Sie haben keine Zwei-Faktor-Authentifizierung eingerichtet. Die erstmalige Einrichtung muss über die interne Verbindung in der Praxis erfolgen.",
        "require-webauthn": "true",
        "requirement-mode": "ALTERNATIVE"
      }
    }
  ],
  "messageBundles": {},
  "smtpServer": {
    "host": "127.0.0.11",
    "from": "keycloak@$(env:EE_HOSTNAME)",
    "starttls": "",
    "auth": "false",
    "ssl": "false"
  },
  "browserFlow": "EE Browser Webauthn and Conditional OTP"
}